<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recept Toevoegen - Loemek</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; background: #f5f3ff; padding: 20px; color: #374151; }
        .form-container { max-width: 600px; margin: 0 auto; background: white; padding: 30px; border-radius: 25px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); }
        h2 { color: #8b5cf6; text-align: center; }
        label { font-weight: 600; display: block; margin-top: 15px; }
        input, textarea { width: 100%; padding: 12px; margin-top: 5px; border: 1px solid #ddd; border-radius: 12px; box-sizing: border-box; }
        
        /* Multi-select styling */
        .theme-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; background: #f9fafb; padding: 15px; border-radius: 12px; }
        .theme-item { display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer; }
        .theme-item input { width: auto; margin: 0; }

        .btn-submit { background: linear-gradient(135deg, #ec4899, #8b5cf6); color: white; border: none; padding: 15px; border-radius: 25px; width: 100%; font-weight: 600; margin-top: 25px; cursor: pointer; font-size: 16px; }
    </style>
</head>
<body>

<div class="form-container">
    <h2>Nieuw Recept ‚úçÔ∏è</h2>
    <form id="recipeForm">
        <label>Titel</label>
        <input type="text" id="titel" placeholder="Bijv. Grootmoeders Appeltaart" required>

        <label>Chef</label>
        <input type="text" id="chef" placeholder="Jouw naam" required>

        <label>Thema's (selecteer meerdere mogelijk)</label>
        <div class="theme-grid" id="themeGrid">
            <label class="theme-item"><input type="checkbox" value="Hapjes"> Hapjes</label>
            <label class="theme-item"><input type="checkbox" value="Voorgerecht"> Voorgerecht</label>
            <label class="theme-item"><input type="checkbox" value="Hoofdgerecht"> Hoofdgerecht</label>
            <label class="theme-item"><input type="checkbox" value="Dessert"> Dessert</label>
            <label class="theme-item"><input type="checkbox" value="Patisserie"> Patisserie</label>
            <label class="theme-item"><input type="checkbox" value="Sauzen"> Sauzen</label>
            <label class="theme-item"><input type="checkbox" value="Marinades"> Marinades</label>
            <label class="theme-item"><input type="checkbox" value="Snack"> Snack</label>
        </div>

        <label>Aantal personen</label>
        <input type="number" id="personen" value="4">

        <label>Ingredi√´nten (scheid met een komma)</label>
        <textarea id="ingredienten" rows="4" placeholder="250g bloem, 2 eieren, snufje zout..." required></textarea>

        <label>Bereiding</label>
        <textarea id="bereiding" rows="6" placeholder="Stap 1: Mix de boter..." required></textarea>

        <label>Foto URL</label>
        <input type="url" id="foto" placeholder="Plak hier een afbeeldingslink">

        <button type="submit" class="btn-submit">Recept Delen üöÄ</button>
        <a href="index.html" style="display:block; text-align:center; margin-top:15px; color:#9ca3af; text-decoration:none; font-size:14px;">Terug naar overzicht</a>
    </form>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBzsxSTQKhhh8yKb4AFew7zQz26BMNKfHw",
        authDomain: "mijnkookapp2.firebaseapp.com",
        projectId: "mijnkookapp2",
        storageBucket: "mijnkookapp2.firebasestorage.app",
        messagingSenderId: "77365526386",
        appId: "1:77365526386:web:faa6d99632dae10b4d67eb"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    document.getElementById('recipeForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        // Haal geselecteerde thema's op
        const geselecteerdeThemas = [];
        document.querySelectorAll('#themeGrid input:checked').forEach(cb => geselecteerdeThemas.push(cb.value));

        const nieuwRecept = {
            titel: document.getElementById('titel').value,
            chef: document.getElementById('chef').value,
            types: geselecteerdeThemas, // Dit is nu een lijst (Array)
            personen: document.getElementById('personen').value,
            ingredienten: document.getElementById('ingredienten').value,
            bereiding: document.getElementById('bereiding').value,
            foto: document.getElementById('foto').value,
            datum: new Date(),
            gemiddeldeScore: 0,
            totaalScores: 0,
            aantalStemmen: 0
        };

        try {
            await addDoc(collection(db, "recepten"), nieuwRecept);
            alert("Recept succesvol toegevoegd!");
            window.location.href = "index.html";
        } catch (error) {
            console.error("Fout:", error);
        }
    });
</script>
</body>
</html>
